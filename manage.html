<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Session - Karting Telemetry</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/manage.css">
</head>

<body>
    <div class="container">

        <div class="header">
            <a href="index.html" class="back-link">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 12H5" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <path d="M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
                Back to Dashboard
            </a>
            <h1>Manage Session</h1>
            <div class="subtitle">Create new or edit existing session telemetry</div>
        </div>

        <form id="session-form" class="session-form">
            <div class="form-section">
                <h2>Driver & Date</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="driver">Driver Name</label>
                        <input type="text" id="driver" required placeholder="e.g. John Doe">
                    </div>
                    <div class="form-group">
                        <label for="session_date">Date</label>
                        <input type="date" id="session_date" required placeholder="YYYY-MM-DD">
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h2>Track Information</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="track_name">Track Name</label>
                        <input type="text" id="track_name" required placeholder="e.g. Speedway">
                    </div>
                    <div class="form-group">
                        <label for="track_config">Configuration</label>
                        <input type="text" id="track_config" required placeholder="e.g. Configuration A">
                    </div>
                    <div class="form-group full-width">
                        <label for="maps_link">Google Maps Link</label>
                        <input type="url" id="maps_link" placeholder="https://maps.app.goo.gl/...">
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h2>Video Telemetry</h2>
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label for="video_url">YouTube Video URL</label>
                        <input type="url" id="video_url" placeholder="https://youtu.be/...">
                    </div>
                    <div class="form-group">
                        <label for="video_start_time">Video Start Time (MM:SS)</label>
                        <input type="text" id="video_start_time" placeholder="01:14" pattern="[0-9]{1,2}:[0-9]{2}">
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="laps-header">
                    <h2>Lap Times</h2>
                    <div class="laps-actions">
                        <button type="button" id="bulk-import-btn" class="secondary-btn">Bulk Import</button>
                        <button type="button" id="add-lap-btn" class="secondary-btn">+ Add Lap</button>
                    </div>
                </div>

                <div id="bulk-import-container" class="bulk-import hidden">
                    <textarea id="bulk-laps"
                        placeholder="Paste lap times here (one per line, e.g. '00:45.123' or '1 00:45.123')"></textarea>
                    <div class="bulk-actions">
                        <button type="button" id="process-bulk-btn" class="primary-btn small">Process Laps</button>
                        <button type="button" id="cancel-bulk-btn" class="text-btn small">Cancel</button>
                    </div>
                    <p class="help-text">Paste lap times separated by new lines. Format: MM:SS.mmm or just SS.mmm
                    </p>
                </div>

                <div id="laps-container" class="laps-list">
                    <!-- Laps will be generated here -->
                </div>
            </div>

            <div class="form-actions sticky-footer">
                <div class="footer-info">
                    <div class="file-name-preview" id="filename-preview">Session ID: <span
                            id="session-id-display">Generating...</span></div>
                    <div class="status-tip">‚ÑπÔ∏è After saving, run <code>python generate_list.py</code> to update the
                        dashboard.</div>
                </div>
                <div class="action-buttons">
                    <button type="button" id="reset-btn" class="secondary-btn">Reset Form</button>
                    <button type="submit" id="save-btn" class="primary-btn">üíæ Save Session JSON</button>
                </div>
            </div>
        </form>
    </div>

    <script src="js/manage.js"></script>
</body>

</html>